(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a8b68f0"],{"07fa":function(t,e,i){},"7a22":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[i("div",{staticClass:"setting"},[i("el-form",{attrs:{model:t.setting,disabled:t.disabled}},[i("p",{staticClass:"label"},[t._v("网站信息")]),i("el-form-item",{attrs:{label:"网站标题"}},[i("el-input",{attrs:{placeholder:"请输入网站标题"},model:{value:t.setting.siteTitle,callback:function(e){t.$set(t.setting,"siteTitle",e)},expression:"setting.siteTitle"}})],1),i("el-form-item",{attrs:{label:"邮箱"}},[i("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.setting.mail,callback:function(e){t.$set(t.setting,"mail",e)},expression:"setting.mail"}})],1),i("el-form-item",{attrs:{label:"备案号"}},[i("el-input",{attrs:{placeholder:"请输入网站备案号"},model:{value:t.setting.icp,callback:function(e){t.$set(t.setting,"icp",e)},expression:"setting.icp"}})],1),i("p",{staticClass:"label"},[t._v("个人头像")]),i("el-form-item",[i("Uploader",{attrs:{URL:"/api/upload",imageUrl:t.setting.avatar},on:{uploadFinsh:t.changeAvatar}})],1),i("p",{staticClass:"label"},[t._v("网站图标")]),i("el-form-item",{attrs:{label:"图标地址"}},[i("el-input",{attrs:{placeholder:"请输入图标地址"},model:{value:t.setting.favicon,callback:function(e){t.$set(t.setting,"favicon",e)},expression:"setting.favicon"}})],1),i("el-form-item",{attrs:{label:"图标预览"}},[i("el-image",{attrs:{src:t.setting.favicon}})],1),i("p",{staticClass:"label"},[t._v("GitHub信息")]),i("el-form-item",{attrs:{label:"GitHub名称"}},[i("el-input",{attrs:{placeholder:"请输入GitHub名称"},model:{value:t.setting.githubName,callback:function(e){t.$set(t.setting,"githubName",e)},expression:"setting.githubName"}})],1),i("el-form-item",{attrs:{label:"GitHub地址"}},[i("el-input",{attrs:{placeholder:"请输入GitHub地址"},model:{value:t.setting.github,callback:function(e){t.$set(t.setting,"github",e)},expression:"setting.github"}})],1),i("p",{staticClass:"label"},[t._v("QQ信息")]),i("el-form-item",{attrs:{label:"QQ号码"}},[i("el-input",{attrs:{placeholder:"请输入QQ号码"},model:{value:t.setting.qq,callback:function(e){t.$set(t.setting,"qq",e)},expression:"setting.qq"}})],1),i("el-form-item",{attrs:{label:"QQ二维码预览"}},[i("Uploader",{attrs:{URL:"/api/upload",imageUrl:t.setting.qqQrCode},on:{uploadFinsh:t.changeQQQrcode}})],1),i("p",{staticClass:"label"},[t._v("微信信息")]),i("el-form-item",{attrs:{label:"微信号码"}},[i("el-input",{attrs:{placeholder:"请输入微信号码"},model:{value:t.setting.weixin,callback:function(e){t.$set(t.setting,"weixin",e)},expression:"setting.weixin"}})],1),i("el-form-item",{attrs:{label:"微信二维码预览"}},[i("Uploader",{attrs:{URL:"/api/upload",imageUrl:t.setting.weixinQrCode},on:{uploadFinsh:t.changeWeixinQrcode}})],1)],1),i("el-button",{attrs:{disabled:!t.editing},on:{click:t.cancelEdit}},[t._v("取消编辑")]),i("el-button",{attrs:{type:"primary"},on:{click:t.editSetting}},[t._v(t._s(t.editing?"完成编辑":"进入编辑"))])],1)])},n=[],s=i("c7f0"),l=i("c7eb"),r=i("1da1"),o=i("b775");function c(){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["a"])({url:"/api/setting",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function d(t){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(Object(l["a"])().mark((function t(e){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["a"])({url:"/api/setting",method:"put",headers:{"Content-Type":"application/json"},data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}var p={components:{Uploader:s["a"]},data:function(){return{loading:!0,disabled:!0,editing:!1,setting:{siteTitle:"",mail:"",icp:"",avatar:"",favicon:"",githubName:"",github:"",qq:"",qqQrCode:"",weixin:"",weixinQrCode:""},tempSetting:{siteTitle:"",mail:"",icp:"",avatar:"",favicon:"",githubName:"",github:"",qq:"",qqQrCode:"",weixin:"",weixinQrCode:""}}},methods:{getSetting:function(){var t=this;c().then((function(e){for(var i in t.setting)t.setting[i]=e.data[i];t.loading=!1}))},changeAvatar:function(t){this.setting.avatar=t},changeQQQrcode:function(t){this.setting.qqQrCode=t},changeWeixinQrcode:function(t){this.setting.weixinQrCode=t},editSetting:function(){var t=this;if(this.editing){var e=!0;for(var i in this.setting)e=e&&!!this.setting[i];e?(this.loading=!0,d(this.setting).then((function(e){!e.code&&e.data&&(t.loading=!1,t.editing=!1,t.disabled=!0,t.$message({type:"success",message:"修改成功"}))}))):this.$message({type:"error",message:"请将信息填写完整"})}else for(var a in this.disabled=!1,this.editing=!0,this.setting)this.tempSetting[a]=this.setting[a]},cancelEdit:function(){for(var t in this.disabled=!0,this.editing=!1,this.setting)this.setting[t]=this.tempSetting[t]}},created:function(){this.getSetting()}},f=p,m=(i("be64"),i("2877")),h=Object(m["a"])(f,a,n,!1,null,"e61fa0b6",null);e["default"]=h.exports},9088:function(t,e,i){},a846:function(t,e,i){"use strict";i("07fa")},be64:function(t,e,i){"use strict";i("9088")},c7f0:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload"},[i("p",{staticClass:"title"},[t._v(t._s(t.title))]),i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"uploader",attrs:{"show-file-list":!1,action:t.URL,headers:t.headers,"on-success":t.afterUpload,"before-upload":t.beforeUpload}},[t.imageUrl?i("el-image",{staticClass:"imgPreview",attrs:{src:t.imageUrl}}):i("i",{staticClass:"el-icon-plus uploader-icon"})],1)],1)},n=[],s=(i("ac1f"),i("00b4"),{name:"Uploader",props:{URL:{type:String,require:!0},title:{type:String,default:""},imageUrl:{type:String,default:""}},data:function(){return{loading:!1}},computed:{headers:function(){return{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}},methods:{afterUpload:function(t){this.loading=!1,!t.code&&t.data&&this.$emit("uploadFinsh",t.data)},beforeUpload:function(t){var e=/^image\/(.*)$/,i=e.test(t.type);return i?this.loading=!0:(this.$emit("uploadFinsh"),this.$message.error("文件不是图片!")),i}}}),l=s,r=(i("a846"),i("2877")),o=Object(r["a"])(l,a,n,!1,null,"76ff8386",null);e["a"]=o.exports}}]);